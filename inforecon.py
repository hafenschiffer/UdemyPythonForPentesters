#!/usr/bin/env python3

import sys
import requests
import socket
import json


def getheaders():
    response = requests.get("https://%s" % sys.argv[1])
    print('\n %s' % str(response.headers))


def getip():
    ip = socket.gethostbyname(sys.argv[1])
    print('\nThe IP address of %s is %s\n' %(sys.argv[1], ip))
    return ip


def getipinfo(ip):
    response = requests.get('https://ipinfo.io/%s/json' % ip)
    ipinfo = json.loads(response.text)
    print('Location: %s' % ipinfo['loc'])
    print('Region: %s' % ipinfo['region'])
    print('City: %s' % ipinfo['city'])
    print('Country: %s' % ipinfo['country'])


if __name__ == "__main__":
    if len(sys.argv) < 2:
        print("Usage: %s <domain>" % sys.argv[0])
        sys.exit(1)
    else:
        getheaders()
        ip = getip()
        getipinfo(ip)
